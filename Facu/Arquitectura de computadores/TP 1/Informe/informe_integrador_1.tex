%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8
\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out
                                                          % if you need a4paper
%\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4

\usepackage{float}
                                                          % paper
% uso paquete bookmark para tener bien los outlines.
\usepackage{bookmark}

% Configuro el idioma.
\usepackage[utf8]{inputenc} % Importante para mantener acentos.
\usepackage[spanish, activeacute]{babel} % Requiere: texlive-lang-spanish. Por primera vez hay que ejecutar: texconfig init> log

% Paquete para poder usar acentos en $$.
\usepackage{mathtools}
%\setmathfont{XITS math}

% Para los diagramas de flujo
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}

% Elementos del diagrama
\tikzstyle{startstop} = [rectangle, rounded corners, 
minimum width=6em, 
minimum height=2em,
text centered, 
draw=black, 
fill=red!30]

\tikzstyle{io} = [trapezium, 
trapezium stretches=true, % A later addition
trapezium left angle=70, 
trapezium right angle=110, 
minimum width=6em, 
minimum height=2em, text centered, 
draw=black, fill=blue!30]

\tikzstyle{def} = [rectangle, 
minimum width=14em, 
minimum height=3em, 
text centered, 
text width=12em, 
draw=black, 
fill=purple!30]

\tikzstyle{process} = [rectangle, 
minimum width=6em, 
minimum height=2em, 
text centered, 
text width=6em, 
draw=black, 
fill=orange!30]

\tikzstyle{decision} = [diamond, 
minimum width=6em, 
minimum height=6em, 
text centered, 
draw=black, 
fill=green!30]
\tikzstyle{arrow} = [thick,->,>=stealth]

\usepackage{siunitx}

% package to get \url
\usepackage{hyperref}
\hypersetup{
  colorlinks=true,
  linkcolor=magenta,
  filecolor=magenta,
  citecolor=magenta,      
  urlcolor=magenta,
}

% Graficos electrónicos
\usepackage{circuitikz}

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document

\usepackage{graphicx}
\usepackage{graphics}

% styling for matlab/octave code.
\usepackage{matlab-prettifier}
% Configuracion, con esto puede agregar ñ.
\lstset{
  literate={ñ}{{\~n}}1
}

\usepackage{listings}

% The following packages can be found on http:\\www.ctan.org
%\usepackage{graphics} % for pdf, bitmapped graphics files
%\usepackage{epsfig} % for postscript graphics files
%\usepackage{mathptmx} % assumes new font selection scheme installed
%\usepackage{times} % assumes new font selection scheme installed
\usepackage{amsmath} % assumes amsmath package installed
%\usepackage{amssymb}  % assumes amsmath package installed

\title{\LARGE \bf Integrador TP N° 1}

\author{
  Tom\'as Vidal\\
  {\it Arquitectura de Computadoras}\\
  {\it Facultad de Ingenier\'ia, UNLP, La Plata, Argentina.}\\
  {\it 26 de Abril, 2024.}
}                                            % <-this % stops a space


% comienzo

% INTRO


% Figura
\newcommand{\image}[2] {
  \begin{figure}[H]
    \centering
    \includegraphics[width=0.43\textwidth]{./#1.png}
    \caption{#2}
    \label{fig:#1}
  \end{figure}
}

% Codigo
% \begin{lstlisting}[style=Matlab-editor]
% % el código va aca
% dispc("HELLO WORLD");
% \end{lstlisting}

\begin{document}
\maketitle
\thispagestyle{empty}
\pagestyle{empty}

%\section{INTRODUCCCI\'ON}
% TODO

\section{Bubble Sort} \label{sec:bubble_sort}
Para resolver el problema se empleó el algoritmo de \textbf{Bubble Sort}, debido a que cumple con los requerimientos, es simple, facil de implementar y, solo necesita un espacio extra de memoria. Aunque no todo es perfecto, este algoritmo implica un coste de media de $\textbf{O}(n^{2})$, en el mejor de los casos es $\textbf{O}(n)$, y en el peor nuevamente es $\textbf{O}(n^{2})$; esto quiere decir que si se tiene un vector con $n$ elementos, se tienen que realizar de media $n^{2}$ operaciones para ordenar este vector con el algoritmo.

\subsection{Espacio extra de memoria}
La variable \textbf{aJData} (con dirección de memoria \textbf{aJAddr}), en el código (\ref{sec:bubble_sort}), es un espacio de memoria extra requerido (mencionado previamente en \ref{sec:bubble_sort}) que se emplea para almacenar temporalmente el dato del vector que está siendo comparado, ya que la idea del algoritmo es utilizar las mismas posiciones de memoria y no crear nuevas; por ejemplo: si se tiene el vector $[a_0, a_1, a_2]$, $a_0=1$, $a_1=-1$ y $a_2=10$ y se está ordenando $a_0$, entonces almaceno temporalmente $a_0$ y copio el valor de $a_1$ en la posición de memoria de $a_0$ (ya que quiero ordenar de menor a mayor), y luego copio el valor almacenado en la memoria temporal en la posición de memoria del dato $a_1$. Si no se hubiera empleado un espacio extra de memoria, no se hubiera podido recuperar el valor de $a_0$ para copiarlo en $a_1$.

\subsection{Algoritmo implementado}
El algoritmo de Bubble Sort implementado se puede observar en el diagrama de flujo \ref{diag:flujo}, en el mismo se puede apreciar que hay dos bucles independientes (el de \textbf{i} y el de \textbf{j}), estos fueron creados en el código de \textit{Ensamblador} ``iterando'' las \textit{variables} de \textbf{iIndex} y \textbf{jIndex} (ver)
\begin{figure}[htbp]
  \footnotesize
  \centering
  \label{diag:flujo}
  \caption{Diagrama de flujo}
  \vspace{1cm}
  \begin{tikzpicture}[node distance=1.25cm]

  \node (start) [startstop] {Comienzo};
  \node (initcond) [def, below of=start] {a = $<a_0, a_1, \dots, a_n>$};
  \node (def_i_j) [def, below of=initcond] {i=0; j=0};

  \node (i_less_n) [decision, below of=def_i_j, yshift=-0.5cm] {$i<n$};
  \node (print_arr) [process, right of=i_less_n, xshift=2.75cm] {Imprimir arreglo};
  \node (end) [startstop, below of=print_arr, yshift=-0.25cm] {Terminar};

  \node (j_less_n) [decision, below of=i_less_n, yshift=-1.5cm] {$j<n-i-1$};
  \node (inc_i) [process, left of=j_less_n, xshift=-1.4cm, yshift=1.75cm] {$i = i+1$};

  \node (a_gtr_a1) [decision, below of=j_less_n, yshift=-1.75cm] {$a[j]>a[j+1]$};
  \node (inc_j) [process, right of=a_gtr_a1, xshift=1.5cm] {$j = j+1$};

  \node (swap) [process, below of=a_gtr_a1, yshift=-1.5cm] {permutar $ a[j] \leftrightarrow a[j+1]$};

  \draw [arrow] (start) -- (initcond);
  \draw [arrow] (initcond) -- (def_i_j);
  \draw [arrow] (def_i_j) -- (i_less_n);
  \draw [arrow] (i_less_n) -- node[anchor=south] {no} (print_arr);
  \draw [arrow] (print_arr) -- (end);
  \draw [arrow] (i_less_n) -- node[anchor=west] {yes} (j_less_n);
  \draw [arrow] (j_less_n) -| node[anchor=south, xshift=1cm] {no} (inc_i);
  \draw [arrow] (j_less_n) -- node[anchor=west] {yes} (a_gtr_a1);
  \draw [arrow] (inc_i.north) |- (i_less_n.west);
  \draw [arrow] (a_gtr_a1) -- node[anchor=west] {yes} (swap);
  \draw [arrow] (a_gtr_a1) -- node[anchor=south] {no} (inc_j);
  \draw [arrow] (swap) -| (inc_j);
  \draw [arrow] (inc_j.north) |- (j_less_n.north);

\end{tikzpicture}
\end{figure}

\lstinputlisting[firstline=45, lastline=129, frame=L, basicstyle=\tiny, caption={Fragmento del código \textit{``69854\_1\_0.asm''}}, label={code:bubbleSort}]{../programas_tp_1/69854_1_0.asm} 

% \begin{thebibliography}{99}

% TODO
% \bibitem{tftd_tp5}TODO
% \bibitem{tftd_tp5}ANÁLISIS DE SISTEMAS Y SE\~{n}ALES - A\~{n}O 2022, Práctica 5 Transformada de Fourier de Tiempo Discreto (TFTD), Serie Discreta Fourier (SDF).
% \bibitem{tftd_teoria}ANÁLISIS DE SISTEMAS Y SE\~{n}ALES - A\~{n}O 2022, Filminas de teor\'ia 5: Transformada de Fourier de Tiempo Discreto (TFTD).
%
% \end{thebibliography}

\end{document}
